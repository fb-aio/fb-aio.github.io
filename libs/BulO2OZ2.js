import{e,f as t,d as n,k as r,b as o,c as a,g as i,_ as d,a as l,x as s,h as c,i as u,j as f}from"./Co2HKlK5.js";import{c as v}from"./D61fuREp.js";import{b as p,B as h,A as g,x as y,q as m,u as k,d as K,K as E}from"./CWL1kuGj.js";import{r as N,a as x}from"./BqUCZHEx.js";import{R as b}from"./BIU5KoPJ.js";import{r as C}from"./DhsIdmQp.js";import{C as S}from"./SEPaX3IY.js";function w(e,t){return e[t]}var D=["children"];function M(e,t){return"".concat(e,"-").concat(t)}function P(e,t){return null!=e?e:t}function R(e){var t=e||{},n=t.title||"title";return{title:n,_title:t._title||[n],key:t.key||"key",children:t.children||"children"}}function L(t){return function t(n){return g(n).map((function(n){if(!function(e){return e&&e.type&&e.type.isTreeNode}(n))return p(!n,"Tree/TreeNode can only accept TreeNode as children."),null;var o=n.key,a=n.props,i=a.children,d=r(a,D),l=e({key:o},d),s=t(i);return s.length&&(l.children=s),l})).filter((function(e){return e}))}(t)}function O(e,n,r){var o=R(r),a=o._title,i=o.key,d=o.children,l=new Set(!0===n?[]:n),s=[];return function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.map((function(c,u){for(var f,v=M(o?o.pos:"0",u),p=P(c[i],v),g=0;g<a.length;g+=1){var y=a[g];if(void 0!==c[y]){f=c[y];break}}var m=Object.assign(h(c,[].concat(t(a),[i,d])),{title:f,key:p,parent:o,pos:v,children:null,data:c,isStart:[].concat(t(o?o.isStart:[]),[0===u]),isEnd:[].concat(t(o?o.isEnd:[]),[u===r.length-1])});return s.push(m),!0===n||l.has(p)?m.children=e(c[d]||[],m):m.children=[],m}))}(e),s}function T(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.initWrapper,a=r.processEntity,i=r.onProcessFinished,d=r.externalGetKey,l=r.childrenPropName,s=r.fieldNames,c=d||(arguments.length>2?arguments[2]:void 0),u={},f={},v={posEntities:u,keyEntities:f};return o&&(v=o(v)||v),function(e,r,o){var a,i=("object"===n(o)?o:{externalGetKey:o})||{},d=i.childrenPropName,l=i.externalGetKey,s=R(i.fieldNames),c=s.key,u=s.children,f=d||u;l?"string"==typeof l?a=function(e){return e[l]}:"function"==typeof l&&(a=function(e){return l(e)}):a=function(e,t){return P(e[c],t)},function n(o,i,d,l){var s=o?o[f]:e,c=o?M(d.pos,i):"0",u=o?[].concat(t(l),[o]):[];if(o){var v=a(o,c),p={node:o,index:i,pos:c,key:v,parentPos:d.node?d.pos:null,level:d.level+1,nodes:u};r(p)}s&&s.forEach((function(e,t){n(e,t,{node:o,pos:c,level:d?d.level+1:-1},u)}))}(null)}(e,(function(e){var t=e.node,n=e.index,r=e.pos,o=e.key,i=e.parentPos,d=e.level,l={node:t,nodes:e.nodes,index:n,key:o,pos:r,level:d},s=P(o,r);u[r]=l,f[s]=l,l.parent=u[i],l.parent&&(l.parent.children=l.parent.children||[],l.parent.children.push(l)),a&&a(l,v)}),{externalGetKey:c,childrenPropName:l,fieldNames:s}),i&&i(v),v}function A(e,t){var n=t.expandedKeys,r=t.selectedKeys,o=t.loadedKeys,a=t.loadingKeys,i=t.checkedKeys,d=t.halfCheckedKeys,l=t.dragOverNodeKey,s=t.dropPosition,c=w(t.keyEntities,e);return{eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==r.indexOf(e),loaded:-1!==o.indexOf(e),loading:-1!==a.indexOf(e),checked:-1!==i.indexOf(e),halfChecked:-1!==d.indexOf(e),pos:String(c?c.pos:""),dragOver:l===e&&0===s,dragOverGapTop:l===e&&-1===s,dragOverGapBottom:l===e&&1===s}}function I(t){var n=t.data,r=t.expanded,o=t.selected,a=t.checked,i=t.loaded,d=t.loading,l=t.halfChecked,s=t.dragOver,c=t.dragOverGapTop,u=t.dragOverGapBottom,f=t.pos,v=t.active,h=t.eventKey,g=e(e({},n),{},{expanded:r,selected:o,checked:a,loaded:i,loading:d,halfChecked:l,dragOver:s,dragOverGapTop:c,dragOverGapBottom:u,pos:f,active:v,key:h});return"props"in g||Object.defineProperty(g,"props",{get:function(){return p(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),g}function H(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function B(e){var t=e||{},n=t.disabled,r=t.disableCheckbox,o=t.checkable;return!(!n&&!r)||!1===o}function j(e,t,n,r){var o,a=[];o=r||B;var i,d=new Set(e.filter((function(e){var t=!!w(n,e);return t||a.push(e),t}))),l=new Map,s=0;return Object.keys(n).forEach((function(e){var t=n[e],r=t.level,o=l.get(r);o||(o=new Set,l.set(r,o)),o.add(t),s=Math.max(s,r)})),p(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),i=!0===t?function(e,t,n,r){for(var o=new Set(e),a=new Set,i=0;i<=n;i+=1)(t.get(i)||new Set).forEach((function(e){var t=e.key,n=e.node,a=e.children,i=void 0===a?[]:a;o.has(t)&&!r(n)&&i.filter((function(e){return!r(e.node)})).forEach((function(e){o.add(e.key)}))}));for(var d=new Set,l=n;l>=0;l-=1)(t.get(l)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!r(n)&&e.parent&&!d.has(e.parent.key))if(r(e.parent.node))d.add(t.key);else{var i=!0,l=!1;(t.children||[]).filter((function(e){return!r(e.node)})).forEach((function(e){var t=e.key,n=o.has(t);i&&!n&&(i=!1),l||!n&&!a.has(t)||(l=!0)})),i&&o.add(t.key),l&&a.add(t.key),d.add(t.key)}}));return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(H(a,o))}}(d,l,s,o):function(e,t,n,r,o){for(var a=new Set(e),i=new Set(t),d=0;d<=r;d+=1)(n.get(d)||new Set).forEach((function(e){var t=e.key,n=e.node,r=e.children,d=void 0===r?[]:r;a.has(t)||i.has(t)||o(n)||d.filter((function(e){return!o(e.node)})).forEach((function(e){a.delete(e.key)}))}));i=new Set;for(var l=new Set,s=r;s>=0;s-=1)(n.get(s)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!o(n)&&e.parent&&!l.has(e.parent.key))if(o(e.parent.node))l.add(t.key);else{var r=!0,d=!1;(t.children||[]).filter((function(e){return!o(e.node)})).forEach((function(e){var t=e.key,n=a.has(t);r&&!n&&(r=!1),d||!n&&!i.has(t)||(d=!0)})),r||a.delete(t.key),d&&i.add(t.key),l.add(t.key)}}));return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(H(i,a))}}(d,t.halfCheckedKeys,l,s,o),i}var _=N.createContext(null),z=N.createContext({}),W=function(e){for(var t=e.prefixCls,n=e.level,r=e.isStart,a=e.isEnd,i="".concat(t,"-indent-unit"),d=[],l=0;l<n;l+=1)d.push(N.createElement("span",{key:l,className:v(i,o(o({},"".concat(i,"-start"),r[l]),"".concat(i,"-end"),a[l]))}));return N.createElement("span",{"aria-hidden":"true",className:"".concat(t,"-indent")},d)};const Y=N.memo(W);var G=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],U="open",F="close",X=function(t){var n,d,l,s=t.eventKey,c=t.className,u=t.style,f=t.dragOver,p=t.dragOverGapTop,h=t.dragOverGapBottom,g=t.isLeaf,m=t.isStart,k=t.isEnd,K=t.expanded,E=t.selected,N=t.checked,b=t.halfChecked,C=t.loading,S=t.domRef,D=t.active,M=t.data,P=t.onMouseMove,R=t.selectable,L=r(t,G),O=x.useContext(_),T=x.useContext(z),A=x.useRef(null),H=x.useState(!1),B=a(H,2),j=B[0],W=B[1],X=!!(O.disabled||t.disabled||null!==(n=T.nodeDisabled)&&void 0!==n&&n.call(T,M)),q=x.useMemo((function(){return!(!O.checkable||!1===t.checkable)&&O.checkable}),[O.checkable,t.checkable]),V=function(e){X||q&&!t.disableCheckbox&&O.onNodeCheck(e,I(t),!N)},J=x.useMemo((function(){return"boolean"==typeof R?R:O.selectable}),[R,O.selectable]),Q=function(e){O.onNodeClick(e,I(t)),J?function(e){X||O.onNodeSelect(e,I(t))}(e):V(e)},Z=function(e){O.onNodeDoubleClick(e,I(t))},$=function(e){O.onNodeMouseEnter(e,I(t))},ee=function(e){O.onNodeMouseLeave(e,I(t))},te=function(e){O.onNodeContextMenu(e,I(t))},ne=x.useMemo((function(){return!(!O.draggable||O.draggable.nodeDraggable&&!O.draggable.nodeDraggable(M))}),[O.draggable,M]),re=function(e){C||O.onNodeExpand(e,I(t))},oe=x.useMemo((function(){var e=(w(O.keyEntities,s)||{}).children;return Boolean((e||[]).length)}),[O.keyEntities,s]),ae=x.useMemo((function(){return!1!==g&&(g||!O.loadData&&!oe||O.loadData&&t.loaded&&!oe)}),[g,O.loadData,oe,t.loaded]);x.useEffect((function(){C||"function"!=typeof O.loadData||!K||ae||t.loaded||O.onNodeLoad(I(t))}),[C,O.loadData,O.onNodeLoad,K,ae,t]);var ie=x.useMemo((function(){var e;return null!==(e=O.draggable)&&void 0!==e&&e.icon?x.createElement("span",{className:"".concat(O.prefixCls,"-draggable-icon")},O.draggable.icon):null}),[O.draggable]),de=function(n){var r=t.switcherIcon||O.switcherIcon;return"function"==typeof r?r(e(e({},t),{},{isLeaf:n})):r},le=x.useMemo((function(){if(!q)return null;var e="boolean"!=typeof q?q:null;return x.createElement("span",{className:v("".concat(O.prefixCls,"-checkbox"),o(o(o({},"".concat(O.prefixCls,"-checkbox-checked"),N),"".concat(O.prefixCls,"-checkbox-indeterminate"),!N&&b),"".concat(O.prefixCls,"-checkbox-disabled"),X||t.disableCheckbox)),onClick:V,role:"checkbox","aria-checked":b?"mixed":N,"aria-disabled":X||t.disableCheckbox,"aria-label":"Select ".concat("string"==typeof t.title?t.title:"tree node")},e)}),[q,N,b,X,t.disableCheckbox,t.title]),se=x.useMemo((function(){return ae?null:K?U:F}),[ae,K]),ce=x.useMemo((function(){return x.createElement("span",{className:v("".concat(O.prefixCls,"-iconEle"),"".concat(O.prefixCls,"-icon__").concat(se||"docu"),o({},"".concat(O.prefixCls,"-icon_loading"),C))})}),[O.prefixCls,se,C]),ue=x.useMemo((function(){var e=Boolean(O.draggable);return!t.disabled&&e&&O.dragOverNodeKey===s?O.dropIndicatorRender({dropPosition:O.dropPosition,dropLevelOffset:O.dropLevelOffset,indent:O.indent,prefixCls:O.prefixCls,direction:O.direction}):null}),[O.dropPosition,O.dropLevelOffset,O.indent,O.prefixCls,O.direction,O.draggable,O.dragOverNodeKey,O.dropIndicatorRender]),fe=x.useMemo((function(){var e,n,r=t.title,a=void 0===r?"---":r,i="".concat(O.prefixCls,"-node-content-wrapper");if(O.showIcon){var d=t.icon||O.icon;e=d?x.createElement("span",{className:v("".concat(O.prefixCls,"-iconEle"),"".concat(O.prefixCls,"-icon__customize"))},"function"==typeof d?d(t):d):ce}else O.loadData&&C&&(e=ce);return n="function"==typeof a?a(M):O.titleRender?O.titleRender(M):a,x.createElement("span",{ref:A,title:"string"==typeof a?a:"",className:v(i,"".concat(i,"-").concat(se||"normal"),o({},"".concat(O.prefixCls,"-node-selected"),!X&&(E||j))),onMouseEnter:$,onMouseLeave:ee,onContextMenu:te,onClick:Q,onDoubleClick:Z},e,x.createElement("span",{className:"".concat(O.prefixCls,"-title")},n),ue)}),[O.prefixCls,O.showIcon,t,O.icon,ce,O.titleRender,M,se,$,ee,te,Q,Z]),ve=y(L,{aria:!0,data:!0}),pe=(w(O.keyEntities,s)||{}).level,he=k[k.length-1],ge=!X&&ne,ye=O.draggingNodeKey===s,me=void 0!==R?{"aria-selected":!!R}:void 0;return x.createElement("div",i({ref:S,role:"treeitem","aria-expanded":g?void 0:K,className:v(c,"".concat(O.prefixCls,"-treenode"),(l={},o(o(o(o(o(o(o(o(o(o(l,"".concat(O.prefixCls,"-treenode-disabled"),X),"".concat(O.prefixCls,"-treenode-switcher-").concat(K?"open":"close"),!g),"".concat(O.prefixCls,"-treenode-checkbox-checked"),N),"".concat(O.prefixCls,"-treenode-checkbox-indeterminate"),b),"".concat(O.prefixCls,"-treenode-selected"),E),"".concat(O.prefixCls,"-treenode-loading"),C),"".concat(O.prefixCls,"-treenode-active"),D),"".concat(O.prefixCls,"-treenode-leaf-last"),he),"".concat(O.prefixCls,"-treenode-draggable"),ne),"dragging",ye),o(o(o(o(o(o(o(l,"drop-target",O.dropTargetKey===s),"drop-container",O.dropContainerKey===s),"drag-over",!X&&f),"drag-over-gap-top",!X&&p),"drag-over-gap-bottom",!X&&h),"filter-node",null===(d=O.filterTreeNode)||void 0===d?void 0:d.call(O,I(t))),"".concat(O.prefixCls,"-treenode-leaf"),ae))),style:u,draggable:ge,onDragStart:ge?function(e){e.stopPropagation(),W(!0),O.onNodeDragStart(e,t);try{e.dataTransfer.setData("text/plain","")}catch(n){}}:void 0,onDragEnter:ne?function(e){e.preventDefault(),e.stopPropagation(),O.onNodeDragEnter(e,t)}:void 0,onDragOver:ne?function(e){e.preventDefault(),e.stopPropagation(),O.onNodeDragOver(e,t)}:void 0,onDragLeave:ne?function(e){e.stopPropagation(),O.onNodeDragLeave(e,t)}:void 0,onDrop:ne?function(e){e.preventDefault(),e.stopPropagation(),W(!1),O.onNodeDrop(e,t)}:void 0,onDragEnd:ne?function(e){e.stopPropagation(),W(!1),O.onNodeDragEnd(e,t)}:void 0,onMouseMove:P},me,ve),x.createElement(Y,{prefixCls:O.prefixCls,level:pe,isStart:m,isEnd:k}),ie,function(){if(ae){var e=de(!0);return!1!==e?x.createElement("span",{className:v("".concat(O.prefixCls,"-switcher"),"".concat(O.prefixCls,"-switcher-noop"))},e):null}var t=de(!1);return!1!==t?x.createElement("span",{onClick:re,className:v("".concat(O.prefixCls,"-switcher"),"".concat(O.prefixCls,"-switcher_").concat(K?U:F))},t):null}(),le,fe)};function q(e,t){if(!e)return[];var n=e.slice(),r=n.indexOf(t);return r>=0&&n.splice(r,1),n}function V(e,t){var n=(e||[]).slice();return-1===n.indexOf(t)&&n.push(t),n}function J(e){return e.split("-")}function Q(e,t){var n=[];return function e(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var r=t.key,o=t.children;n.push(r),e(o)}))}(w(t,e).children),n}function Z(e){if(e.parent){var t=J(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function $(e,t,n,r,o,a,i,d,l,s){var c,u=e.clientX,f=e.clientY,v=e.target.getBoundingClientRect(),p=v.top,h=v.height,g=(("rtl"===s?-1:1)*(((null==o?void 0:o.x)||0)-u)-12)/r,y=l.filter((function(e){var t;return null===(t=d[e])||void 0===t||null===(t=t.children)||void 0===t?void 0:t.length})),m=w(d,n.eventKey);if(f<p+h/2){var k=i.findIndex((function(e){return e.key===m.key})),K=i[k<=0?0:k-1].key;m=w(d,K)}var E=m.key,N=m,x=m.key,b=0,C=0;if(!y.includes(E))for(var S=0;S<g&&Z(m);S+=1)m=m.parent,C+=1;var D,M=t.data,P=m.node,R=!0;return D=J(m.pos),0===Number(D[D.length-1])&&0===m.level&&f<p+h/2&&a({dragNode:M,dropNode:P,dropPosition:-1})&&m.key===n.eventKey?b=-1:(N.children||[]).length&&y.includes(x)?a({dragNode:M,dropNode:P,dropPosition:0})?b=0:R=!1:0===C?g>-1.5?a({dragNode:M,dropNode:P,dropPosition:1})?b=1:R=!1:a({dragNode:M,dropNode:P,dropPosition:0})?b=0:a({dragNode:M,dropNode:P,dropPosition:1})?b=1:R=!1:a({dragNode:M,dropNode:P,dropPosition:1})?b=1:R=!1,{dropPosition:b,dropLevelOffset:C,dropTargetKey:m.key,dropTargetPos:m.pos,dragOverNodeKey:x,dropContainerKey:0===b?null:(null===(c=m.parent)||void 0===c?void 0:c.key)||null,dropAllowed:R}}function ee(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e}function te(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==n(e))return p(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function ne(e,n){var r=new Set;function o(e){if(!r.has(e)){var t=w(n,e);if(t){r.add(e);var a=t.parent;t.node.disabled||a&&o(a.key)}}}return(e||[]).forEach((function(e){o(e)})),t(r)}X.isTreeNode=1;var re=N.forwardRef((function(t,n){var r=t.height,a=t.offsetY,d=t.offsetX,l=t.children,s=t.prefixCls,c=t.onInnerResize,u=t.innerProps,f=t.rtl,p=t.extra,h={},g={display:"flex",flexDirection:"column"};return void 0!==a&&(h={height:r,position:"relative",overflow:"hidden"},g=e(e({},g),{},o(o(o(o(o({transform:"translateY(".concat(a,"px)")},f?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),N.createElement("div",{style:h},N.createElement(b,{onResize:function(e){e.offsetHeight&&c&&c()}},N.createElement("div",i({style:g,className:v(o({},"".concat(s,"-holder-inner"),s)),ref:n},u),l,p)))}));function oe(e){var t=e.children,n=e.setRef,r=N.useCallback((function(e){n(e)}),[]);return N.cloneElement(t,{ref:r})}function ae(e,t,n){var r=N.useState(e),o=a(r,2),i=o[0],d=o[1],l=N.useState(null),s=a(l,2),c=s[0],u=s[1];return N.useEffect((function(){var n=function(e,t,n){var r,o,a=e.length,i=t.length;if(0===a&&0===i)return null;a<i?(r=e,o=t):(r=t,o=e);var d={__EMPTY_ITEM__:!0};function l(e){return void 0!==e?n(e):d}for(var s=null,c=1!==Math.abs(a-i),u=0;u<o.length;u+=1){var f=l(r[u]);if(f!==l(o[u])){s=u,c=c||f!==l(o[u+1]);break}}return null===s?null:{index:s,multiple:c}}(i||[],e||[],t);void 0!==(null==n?void 0:n.index)&&u(e[n.index]),d(e)}),[e]),[c]}re.displayName="Filler";var ie="object"===("undefined"==typeof navigator?"undefined":n(navigator))&&/Firefox/i.test(navigator.userAgent);const de=function(e,t,n,r){var o=N.useRef(!1),a=N.useRef(null);var i=N.useRef({top:e,bottom:t,left:n,right:r});return i.current.top=e,i.current.bottom=t,i.current.left=n,i.current.right=r,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e?t<0&&i.current.left||t>0&&i.current.right:t<0&&i.current.top||t>0&&i.current.bottom;return n&&r?(clearTimeout(a.current),o.current=!1):r&&!o.current||(clearTimeout(a.current),o.current=!0,a.current=setTimeout((function(){o.current=!1}),50)),!o.current&&r}};function le(e,t,n,r,o,a,i){var d=N.useRef(0),l=N.useRef(null),s=N.useRef(null),c=N.useRef(!1),u=de(t,n,r,o);var f=N.useRef(null),v=N.useRef(null);return[function(t){if(e){m.cancel(v.current),v.current=m((function(){f.current=null}),2);var n=t.deltaX,r=t.deltaY,o=t.shiftKey,p=n,h=r;("sx"===f.current||!f.current&&o&&r&&!n)&&(p=r,h=0,f.current="sx");var g=Math.abs(p),y=Math.abs(h);null===f.current&&(f.current=a&&g>y?"x":"y"),"y"===f.current?function(e,t){if(m.cancel(l.current),!u(!1,t)){var n=e;n._virtualHandled||(n._virtualHandled=!0,d.current+=t,s.current=t,ie||n.preventDefault(),l.current=m((function(){var e=c.current?10:1;i(d.current*e,!1),d.current=0})))}}(t,h):function(e,t){i(t,!0),ie||e.preventDefault()}(t,p)}},function(t){e&&(c.current=t.detail===s.current)}]}var se=function(){function e(){l(this,e),o(this,"maps",void 0),o(this,"id",0),o(this,"diffRecords",new Map),this.maps=Object.create(null)}return d(e,[{key:"set",value:function(e,t){this.diffRecords.set(e,this.maps[e]),this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),e}();function ce(e){var t=parseFloat(e);return isNaN(t)?0:t}var ue=14/15;function fe(e){return Math.floor(Math.pow(e,.5))}function ve(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}var pe=N.forwardRef((function(t,n){var r=t.prefixCls,i=t.rtl,d=t.scrollOffset,l=t.scrollRange,s=t.onStartMove,c=t.onStopMove,u=t.onScroll,f=t.horizontal,p=t.spinSize,h=t.containerSize,g=t.style,y=t.thumbStyle,k=t.showScrollBar,K=N.useState(!1),E=a(K,2),x=E[0],b=E[1],C=N.useState(null),S=a(C,2),w=S[0],D=S[1],M=N.useState(null),P=a(M,2),R=P[0],L=P[1],O=!i,T=N.useRef(),A=N.useRef(),I=N.useState(k),H=a(I,2),B=H[0],j=H[1],_=N.useRef(),z=function(){!0!==k&&!1!==k&&(clearTimeout(_.current),j(!0),_.current=setTimeout((function(){j(!1)}),3e3))},W=l-h||0,Y=h-p||0,G=N.useMemo((function(){return 0===d||0===W?0:d/W*Y}),[d,W,Y]),U=N.useRef({top:G,dragging:x,pageY:w,startTop:R});U.current={top:G,dragging:x,pageY:w,startTop:R};var F=function(e){b(!0),D(ve(e,f)),L(U.current.top),s(),e.stopPropagation(),e.preventDefault()};N.useEffect((function(){var e=function(e){e.preventDefault()},t=T.current,n=A.current;return t.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchstart",F,{passive:!1}),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",F)}}),[]);var X=N.useRef();X.current=W;var q=N.useRef();q.current=Y,N.useEffect((function(){if(x){var e,t=function(t){var n=U.current,r=n.dragging,o=n.pageY,a=n.startTop;m.cancel(e);var i=T.current.getBoundingClientRect(),d=h/(f?i.width:i.height);if(r){var l=(ve(t,f)-o)*d,s=a;!O&&f?s-=l:s+=l;var c=X.current,v=q.current,p=v?s/v:0,g=Math.ceil(p*c);g=Math.max(g,0),g=Math.min(g,c),e=m((function(){u(g,f)}))}},n=function(){b(!1),c()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),m.cancel(e)}}}),[x]),N.useEffect((function(){return z(),function(){clearTimeout(_.current)}}),[d]),N.useImperativeHandle(n,(function(){return{delayHidden:z}}));var V="".concat(r,"-scrollbar"),J={position:"absolute",visibility:B?null:"hidden"},Q={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return f?(J.height=8,J.left=0,J.right=0,J.bottom=0,Q.height="100%",Q.width=p,O?Q.left=G:Q.right=G):(J.width=8,J.top=0,J.bottom=0,O?J.right=0:J.left=0,Q.width="100%",Q.height=p,Q.top=G),N.createElement("div",{ref:T,className:v(V,o(o(o({},"".concat(V,"-horizontal"),f),"".concat(V,"-vertical"),!f),"".concat(V,"-visible"),B)),style:e(e({},J),g),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:z},N.createElement("div",{ref:A,className:v("".concat(V,"-thumb"),o({},"".concat(V,"-thumb-moving"),x)),style:e(e({},Q),y),onMouseDown:F}))}));function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,20),Math.floor(t)}var ge=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],ye=[],me={overflowY:"auto",overflowAnchor:"none"};function ke(t,d){var l=t.prefixCls,s=void 0===l?"rc-virtual-list":l,c=t.className,u=t.height,f=t.itemHeight,p=t.fullHeight,h=void 0===p||p,g=t.style,y=t.data,E=t.children,x=t.itemKey,S=t.virtual,w=t.direction,D=t.scrollWidth,M=t.component,P=void 0===M?"div":M,R=t.onScroll,L=t.onVirtualScroll,O=t.onVisibleChange,T=t.innerProps,A=t.extraRender,I=t.styles,H=t.showScrollBar,B=void 0===H?"optional":H,j=r(t,ge),_=N.useCallback((function(e){return"function"==typeof x?x(e):null==e?void 0:e[x]}),[x]),z=function(e){var t=N.useState(0),n=a(t,2),r=n[0],o=n[1],i=N.useRef(new Map),d=N.useRef(new se),l=N.useRef(0);function s(){l.current+=1}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s();var t=function(){var e=!1;i.current.forEach((function(t,n){if(t&&t.offsetParent){var r=t.offsetHeight,o=getComputedStyle(t),a=o.marginTop,i=o.marginBottom,l=r+ce(a)+ce(i);d.current.get(n)!==l&&(d.current.set(n,l),e=!0)}})),e&&o((function(e){return e+1}))};if(e)t();else{l.current+=1;var n=l.current;Promise.resolve().then((function(){n===l.current&&t()}))}}return N.useEffect((function(){return s}),[]),[function(t,n){var r=e(t);i.current.get(r),n?(i.current.set(r,n),c()):i.current.delete(r)},c,d.current,r]}(_),W=a(z,4),Y=W[0],G=W[1],U=W[2],F=W[3],X=!(!1===S||!u||!f),q=N.useMemo((function(){return Object.values(U.maps).reduce((function(e,t){return e+t}),0)}),[U.id,U.maps]),V=X&&y&&(Math.max(f*y.length,q)>u||!!D),J="rtl"===w,Q=v(s,o({},"".concat(s,"-rtl"),J),c),Z=y||ye,$=N.useRef(),ee=N.useRef(),te=N.useRef(),ne=N.useState(0),ie=a(ne,2),ke=ie[0],Ke=ie[1],Ee=N.useState(0),Ne=a(Ee,2),xe=Ne[0],be=Ne[1],Ce=N.useState(!1),Se=a(Ce,2),we=Se[0],De=Se[1],Me=function(){De(!0)},Pe=function(){De(!1)},Re={getKey:_};function Le(e){Ke((function(t){var n=function(e){var t=e;Number.isNaN(Qe.current)||(t=Math.min(t,Qe.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return $.current.scrollTop=n,n}))}var Oe=N.useRef({start:0,end:Z.length}),Te=N.useRef(),Ae=ae(Z,_),Ie=a(Ae,1)[0];Te.current=Ie;var He=N.useMemo((function(){if(!X)return{scrollHeight:void 0,start:0,end:Z.length-1,offset:void 0};var e;if(!V)return{scrollHeight:(null===(e=ee.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:Z.length-1,offset:void 0};for(var t,n,r,o=0,a=Z.length,i=0;i<a;i+=1){var d=Z[i],l=_(d),s=U.get(l),c=o+(void 0===s?f:s);c>=ke&&void 0===t&&(t=i,n=o),c>ke+u&&void 0===r&&(r=i),o=c}return void 0===t&&(t=0,n=0,r=Math.ceil(u/f)),void 0===r&&(r=Z.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,Z.length-1),offset:n}}),[V,X,ke,Z,F,u]),Be=He.scrollHeight,je=He.start,_e=He.end,ze=He.offset;Oe.current.start=je,Oe.current.end=_e,N.useLayoutEffect((function(){var e=U.getRecord();if(1===e.size){var t=Array.from(e.keys())[0],n=e.get(t),r=Z[je];if(r&&void 0===n)if(_(r)===t){var o=U.get(t)-f;Le((function(e){return e+o}))}}U.resetRecord()}),[Be]);var We=N.useState({width:0,height:u}),Ye=a(We,2),Ge=Ye[0],Ue=Ye[1],Fe=N.useRef(),Xe=N.useRef(),qe=N.useMemo((function(){return he(Ge.width,D)}),[Ge.width,D]),Ve=N.useMemo((function(){return he(Ge.height,Be)}),[Ge.height,Be]),Je=Be-u,Qe=N.useRef(Je);Qe.current=Je;var Ze=ke<=0,$e=ke>=Je,et=xe<=0,tt=xe>=D,nt=de(Ze,$e,et,tt),rt=function(){return{x:J?-xe:xe,y:ke}},ot=N.useRef(rt()),at=K((function(t){if(L){var n=e(e({},rt()),t);ot.current.x===n.x&&ot.current.y===n.y||(L(n),ot.current=n)}}));function it(e,t){var n=e;t?(C.flushSync((function(){be(n)})),at()):Le(n)}var dt=function(e){var t=e,n=D?D-Ge.width:0;return t=Math.max(t,0),t=Math.min(t,n)},lt=K((function(e,t){t?(C.flushSync((function(){be((function(t){return dt(t+(J?-e:e))}))})),at()):Le((function(t){return t+e}))})),st=le(X,Ze,$e,et,tt,!!D,lt),ct=a(st,2),ut=ct[0],ft=ct[1];!function(e,t,n){var r,o=N.useRef(!1),a=N.useRef(0),i=N.useRef(0),d=N.useRef(null),l=N.useRef(null),s=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),r=Math.ceil(e.touches[0].pageY),d=a.current-t,s=i.current-r,c=Math.abs(d)>Math.abs(s);c?a.current=t:i.current=r;var u=n(c,c?d:s,!1,e);u&&e.preventDefault(),clearInterval(l.current),u&&(l.current=setInterval((function(){c?d*=ue:s*=ue;var e=Math.floor(c?d:s);(!n(c,e,!0)||Math.abs(e)<=.1)&&clearInterval(l.current)}),16))}},c=function(){o.current=!1,r()},u=function(e){r(),1!==e.touches.length||o.current||(o.current=!0,a.current=Math.ceil(e.touches[0].pageX),i.current=Math.ceil(e.touches[0].pageY),d.current=e.target,d.current.addEventListener("touchmove",s,{passive:!1}),d.current.addEventListener("touchend",c,{passive:!0}))};r=function(){d.current&&(d.current.removeEventListener("touchmove",s),d.current.removeEventListener("touchend",c))},k((function(){return e&&t.current.addEventListener("touchstart",u,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",u),r(),clearInterval(l.current)}}),[e])}(X,$,(function(e,t,n,r){var o=r;return!nt(e,t,n)&&((!o||!o._virtualHandled)&&(o&&(o._virtualHandled=!0),ut({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0))})),function(e,t,n){N.useEffect((function(){var r=t.current;if(e&&r){var o,a,i=!1,d=function(){m.cancel(o)},l=function e(){d(),o=m((function(){n(a),e()}))},s=function(e){if(!e.target.draggable&&0===e.button){var t=e;t._virtualHandled||(t._virtualHandled=!0,i=!0)}},c=function(){i=!1,d()},u=function(e){if(i){var t=ve(e,!1),n=r.getBoundingClientRect(),o=n.top,s=n.bottom;t<=o?(a=-fe(o-t),l()):t>=s?(a=fe(t-s),l()):d()}};return r.addEventListener("mousedown",s),r.ownerDocument.addEventListener("mouseup",c),r.ownerDocument.addEventListener("mousemove",u),function(){r.removeEventListener("mousedown",s),r.ownerDocument.removeEventListener("mouseup",c),r.ownerDocument.removeEventListener("mousemove",u),d()}}}),[e])}(V,$,(function(e){Le((function(t){return t+e}))})),k((function(){function e(e){var t=Ze&&e.detail<0,n=$e&&e.detail>0;!X||t||n||e.preventDefault()}var t=$.current;return t.addEventListener("wheel",ut,{passive:!1}),t.addEventListener("DOMMouseScroll",ft,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",ut),t.removeEventListener("DOMMouseScroll",ft),t.removeEventListener("MozMousePixelScroll",e)}}),[X,Ze,$e]),k((function(){if(D){var e=dt(xe);be(e),at({x:e})}}),[Ge.width,D]);var vt=function(){var e,t;null===(e=Fe.current)||void 0===e||e.delayHidden(),null===(t=Xe.current)||void 0===t||t.delayHidden()},pt=function(t,r,o,i,d,l,s,c){var u=N.useRef(),f=N.useState(null),v=a(f,2),p=v[0],h=v[1];return k((function(){if(p&&p.times<10){if(!t.current)return void h((function(t){return e({},t)}));l();var n=p.targetAlign,a=p.originAlign,c=p.index,u=p.offset,f=t.current.clientHeight,v=!1,g=n,y=null;if(f){for(var m=n||a,k=0,K=0,E=0,N=Math.min(r.length-1,c),x=0;x<=N;x+=1){var b=d(r[x]);K=k;var C=o.get(b);k=E=K+(void 0===C?i:C)}for(var S="top"===m?u:f-u,w=N;w>=0;w-=1){var D=d(r[w]),M=o.get(D);if(void 0===M){v=!0;break}if((S-=M)<=0)break}switch(m){case"top":y=K-u;break;case"bottom":y=E-f+u;break;default:var P=t.current.scrollTop;K<P?g="top":E>P+f&&(g="bottom")}null!==y&&s(y),y!==p.lastTop&&(v=!0)}v&&h(e(e({},p),{},{times:p.times+1,targetAlign:g,lastTop:y}))}}),[p,t.current]),function(e){if(null!=e){if(m.cancel(u.current),"number"==typeof e)s(e);else if(e&&"object"===n(e)){var t,o=e.align;t="index"in e?e.index:r.findIndex((function(t){return d(t)===e.key}));var a=e.offset;h({times:0,index:t,offset:void 0===a?0:a,originAlign:o})}}else c()}}($,Z,U,f,_,(function(){return G(!0)}),Le,vt);N.useImperativeHandle(d,(function(){return{nativeElement:te.current,getScrollInfo:rt,scrollTo:function(e){var t;(t=e)&&"object"===n(t)&&("left"in t||"top"in t)?(void 0!==e.left&&be(dt(e.left)),pt(e.top)):pt(e)}}})),k((function(){if(O){var e=Z.slice(je,_e+1);O(e,Z)}}),[je,_e,Z]);var ht=function(e,t,n,r){var o=N.useMemo((function(){return[new Map,[]]}),[e,n.id,r]),i=a(o,2),d=i[0],l=i[1];return function(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=d.get(o),s=d.get(a);if(void 0===i||void 0===s)for(var c=e.length,u=l.length;u<c;u+=1){var f,v=e[u],p=t(v);d.set(p,u);var h=null!==(f=n.get(p))&&void 0!==f?f:r;if(l[u]=(l[u-1]||0)+h,p===o&&(i=u),p===a&&(s=u),void 0!==i&&void 0!==s)break}return{top:l[i-1]||0,bottom:l[s]}}}(Z,_,U,f),gt=null==A?void 0:A({start:je,end:_e,virtual:V,offsetX:xe,offsetY:ze,rtl:J,getSize:ht}),yt=function(e,t,n,r,o,a,i,d){var l=d.getKey;return e.slice(t,n+1).map((function(e,n){var d=i(e,t+n,{style:{width:r},offsetX:o}),s=l(e);return N.createElement(oe,{key:s,setRef:function(t){return a(e,t)}},d)}))}(Z,je,_e,D,xe,Y,E,Re),mt=null;u&&(mt=e(o({},h?"height":"maxHeight",u),me),X&&(mt.overflowY="hidden",D&&(mt.overflowX="hidden"),we&&(mt.pointerEvents="none")));var kt={};return J&&(kt.dir="rtl"),N.createElement("div",i({ref:te,style:e(e({},g),{},{position:"relative"}),className:Q},kt,j),N.createElement(b,{onResize:function(e){Ue({width:e.offsetWidth,height:e.offsetHeight})}},N.createElement(P,{className:"".concat(s,"-holder"),style:mt,ref:$,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==ke&&Le(t),null==R||R(e),at()},onMouseEnter:vt},N.createElement(re,{prefixCls:s,height:Be,offsetX:xe,offsetY:ze,scrollWidth:D,onInnerResize:G,ref:ee,innerProps:T,rtl:J,extra:gt},yt))),V&&Be>u&&N.createElement(pe,{ref:Fe,prefixCls:s,scrollOffset:ke,scrollRange:Be,rtl:J,onScroll:it,onStartMove:Me,onStopMove:Pe,spinSize:Ve,containerSize:Ge.height,style:null==I?void 0:I.verticalScrollBar,thumbStyle:null==I?void 0:I.verticalScrollBarThumb,showScrollBar:B}),V&&D>Ge.width&&N.createElement(pe,{ref:Xe,prefixCls:s,scrollOffset:xe,scrollRange:D,rtl:J,onScroll:it,onStartMove:Me,onStopMove:Pe,spinSize:qe,containerSize:Ge.width,horizontal:!0,style:null==I?void 0:I.horizontalScrollBar,thumbStyle:null==I?void 0:I.horizontalScrollBarThumb,showScrollBar:B}))}var Ke=N.forwardRef(ke);Ke.displayName="List";var Ee=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Ne=N.forwardRef((function(e,t){var n=e.className,o=e.style,d=e.motion,l=e.motionNodes,c=e.motionType,u=e.onMotionStart,f=e.onMotionEnd,p=e.active,h=e.treeNodeRequiredProps,g=r(e,Ee),y=N.useState(!0),m=a(y,2),K=m[0],E=m[1],x=N.useContext(_).prefixCls,b=l&&"hide"!==c;k((function(){l&&b!==K&&E(b)}),[l]);var C=N.useRef(!1),w=function(){l&&!C.current&&(C.current=!0,f())};!function(e,t){var n=N.useState(!1),r=a(n,2),o=r[0],i=r[1];k((function(){if(o)return e(),function(){t()}}),[o]),k((function(){return i(!0),function(){i(!1)}}),[])}((function(){l&&u()}),w);return l?N.createElement(S,i({ref:t,visible:K},d,{motionAppear:"show"===c,onVisibleChanged:function(e){b===e&&w()}}),(function(e,t){var n=e.className,r=e.style;return N.createElement("div",{ref:t,className:v("".concat(x,"-treenode-motion"),n),style:r},l.map((function(e){var t=Object.assign({},(s(e.data),e.data)),n=e.title,r=e.key,o=e.isStart,a=e.isEnd;delete t.children;var d=A(r,h);return N.createElement(X,i({},t,d,{title:n,active:p,data:e.data,key:r,isStart:o,isEnd:a}))})))})):N.createElement(X,i({domRef:t,className:n,style:o},g,{active:p}))}));function xe(e,t,n){var r=e.findIndex((function(e){return e.key===n})),o=e[r+1],a=t.findIndex((function(e){return e.key===n}));if(o){var i=t.findIndex((function(e){return e.key===o.key}));return t.slice(a+1,i)}return t.slice(a+1)}var be=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Ce={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Se=function(){},we="RC_TREE_MOTION_".concat(Math.random()),De={key:we},Me={key:we,level:0,index:0,pos:"0",node:De,nodes:[De]},Pe={parent:null,children:[],pos:Me.pos,data:De,title:null,key:we,isStart:[],isEnd:[]};function Re(e,t,n,r){return!1!==t&&n?e.slice(0,Math.ceil(n/r)+1):e}function Le(e){return P(e.key,e.pos)}var Oe=N.forwardRef((function(e,t){var n=e.prefixCls,o=e.data;e.selectable,e.checkable;var d=e.expandedKeys,l=e.selectedKeys,c=e.checkedKeys,u=e.loadedKeys,f=e.loadingKeys,v=e.halfCheckedKeys,p=e.keyEntities,h=e.disabled,g=e.dragging,y=e.dragOverNodeKey,m=e.dropPosition,K=e.motion,E=e.height,x=e.itemHeight,b=e.virtual,C=e.scrollWidth,S=e.focusable,w=e.activeItem,D=e.focused,M=e.tabIndex,R=e.onKeyDown,L=e.onFocus,O=e.onBlur,T=e.onActiveChange,I=e.onListChangeStart,H=e.onListChangeEnd,B=r(e,be),j=N.useRef(null),_=N.useRef(null);N.useImperativeHandle(t,(function(){return{scrollTo:function(e){j.current.scrollTo(e)},getIndentWidth:function(){return _.current.offsetWidth}}}));var z=N.useState(d),W=a(z,2),Y=W[0],G=W[1],U=N.useState(o),F=a(U,2),X=F[0],q=F[1],V=N.useState(o),J=a(V,2),Q=J[0],Z=J[1],$=N.useState([]),ee=a($,2),te=ee[0],ne=ee[1],re=N.useState(null),oe=a(re,2),ae=oe[0],ie=oe[1],de=N.useRef(o);function le(){var e=de.current;q(e),Z(e),ne([]),ie(null),H()}de.current=o,k((function(){G(d);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,r=t.length;if(1!==Math.abs(n-r))return{add:!1,key:null};function o(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var r=t.filter((function(e){return!n.has(e)}));return 1===r.length?r[0]:null}return n<r?{add:!0,key:o(e,t)}:{add:!1,key:o(t,e)}}(Y,d);if(null!==e.key)if(e.add){var t=X.findIndex((function(t){return t.key===e.key})),n=Re(xe(X,o,e.key),b,E,x),r=X.slice();r.splice(t+1,0,Pe),Z(r),ne(n),ie("show")}else{var a=o.findIndex((function(t){return t.key===e.key})),i=Re(xe(o,X,e.key),b,E,x),l=o.slice();l.splice(a+1,0,Pe),Z(l),ne(i),ie("hide")}else X!==o&&(q(o),Z(o))}),[d,o]),N.useEffect((function(){g||le()}),[g]);var se=K?Q:o,ce={expandedKeys:d,selectedKeys:l,loadedKeys:u,loadingKeys:f,checkedKeys:c,halfCheckedKeys:v,dragOverNodeKey:y,dropPosition:m,keyEntities:p};return N.createElement(N.Fragment,null,D&&w&&N.createElement("span",{style:Ce,"aria-live":"assertive"},function(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}(w)),N.createElement("div",null,N.createElement("input",{style:Ce,disabled:!1===S||h,tabIndex:!1!==S?M:null,onKeyDown:R,onFocus:L,onBlur:O,value:"",onChange:Se,"aria-label":"for screen reader"})),N.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},N.createElement("div",{className:"".concat(n,"-indent")},N.createElement("div",{ref:_,className:"".concat(n,"-indent-unit")}))),N.createElement(Ke,i({},B,{data:se,itemKey:Le,height:E,fullHeight:!1,virtual:b,itemHeight:x,scrollWidth:C,prefixCls:"".concat(n,"-list"),ref:j,role:"tree",onVisibleChange:function(e){e.every((function(e){return Le(e)!==we}))&&le()}}),(function(e){var t=e.pos,n=Object.assign({},(s(e.data),e.data)),r=e.title,o=e.key,a=e.isStart,d=e.isEnd,l=P(o,t);delete n.key,delete n.children;var c=A(l,ce);return N.createElement(Ne,i({},n,c,{title:r,active:!!w&&o===w.key,pos:t,data:e.data,isStart:a,isEnd:d,motion:K,motionNodes:o===we?te:null,motionType:ae,onMotionStart:I,onMotionEnd:le,treeNodeRequiredProps:ce,onMouseMove:function(){T(null)}}))})))})),Te=function(r){c(s,r);var a=u(s);function s(){var n;l(this,s);for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return n=a.call.apply(a,[this].concat(i)),o(f(n),"destroyed",!1),o(f(n),"delayedDragEnterLogic",void 0),o(f(n),"loadingRetryTimes",{}),o(f(n),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:R()}),o(f(n),"dragStartMousePosition",null),o(f(n),"dragNodeProps",null),o(f(n),"currentMouseOverDroppableNodeKey",null),o(f(n),"listRef",N.createRef()),o(f(n),"onNodeDragStart",(function(e,t){var r=n.state,o=r.expandedKeys,a=r.keyEntities,i=n.props.onDragStart,d=t.eventKey;n.dragNodeProps=t,n.dragStartMousePosition={x:e.clientX,y:e.clientY};var l=q(o,d);n.setState({draggingNodeKey:d,dragChildrenKeys:Q(d,a),indent:n.listRef.current.getIndentWidth()}),n.setExpandedKeys(l),window.addEventListener("dragend",n.onWindowDragEnd),null==i||i({event:e,node:I(t)})})),o(f(n),"onNodeDragEnter",(function(e,r){var o=n.state,a=o.expandedKeys,i=o.keyEntities,d=o.dragChildrenKeys,l=o.flattenNodes,s=o.indent,c=n.props,u=c.onDragEnter,f=c.onExpand,v=c.allowDrop,p=c.direction,h=r.pos,g=r.eventKey;if(n.currentMouseOverDroppableNodeKey!==g&&(n.currentMouseOverDroppableNodeKey=g),n.dragNodeProps){var y=$(e,n.dragNodeProps,r,s,n.dragStartMousePosition,v,l,i,a,p),m=y.dropPosition,k=y.dropLevelOffset,K=y.dropTargetKey,E=y.dropContainerKey,N=y.dropTargetPos,x=y.dropAllowed,b=y.dragOverNodeKey;!d.includes(K)&&x?(n.delayedDragEnterLogic||(n.delayedDragEnterLogic={}),Object.keys(n.delayedDragEnterLogic).forEach((function(e){clearTimeout(n.delayedDragEnterLogic[e])})),n.dragNodeProps.eventKey!==r.eventKey&&(e.persist(),n.delayedDragEnterLogic[h]=window.setTimeout((function(){if(null!==n.state.draggingNodeKey){var o=t(a),d=w(i,r.eventKey);d&&(d.children||[]).length&&(o=V(a,r.eventKey)),n.props.hasOwnProperty("expandedKeys")||n.setExpandedKeys(o),null==f||f(o,{node:I(r),expanded:!0,nativeEvent:e.nativeEvent})}}),800)),n.dragNodeProps.eventKey!==K||0!==k?(n.setState({dragOverNodeKey:b,dropPosition:m,dropLevelOffset:k,dropTargetKey:K,dropContainerKey:E,dropTargetPos:N,dropAllowed:x}),null==u||u({event:e,node:I(r),expandedKeys:a})):n.resetDragState()):n.resetDragState()}else n.resetDragState()})),o(f(n),"onNodeDragOver",(function(e,t){var r=n.state,o=r.dragChildrenKeys,a=r.flattenNodes,i=r.keyEntities,d=r.expandedKeys,l=r.indent,s=n.props,c=s.onDragOver,u=s.allowDrop,f=s.direction;if(n.dragNodeProps){var v=$(e,n.dragNodeProps,t,l,n.dragStartMousePosition,u,a,i,d,f),p=v.dropPosition,h=v.dropLevelOffset,g=v.dropTargetKey,y=v.dropContainerKey,m=v.dropTargetPos,k=v.dropAllowed,K=v.dragOverNodeKey;!o.includes(g)&&k&&(n.dragNodeProps.eventKey===g&&0===h?null===n.state.dropPosition&&null===n.state.dropLevelOffset&&null===n.state.dropTargetKey&&null===n.state.dropContainerKey&&null===n.state.dropTargetPos&&!1===n.state.dropAllowed&&null===n.state.dragOverNodeKey||n.resetDragState():p===n.state.dropPosition&&h===n.state.dropLevelOffset&&g===n.state.dropTargetKey&&y===n.state.dropContainerKey&&m===n.state.dropTargetPos&&k===n.state.dropAllowed&&K===n.state.dragOverNodeKey||n.setState({dropPosition:p,dropLevelOffset:h,dropTargetKey:g,dropContainerKey:y,dropTargetPos:m,dropAllowed:k,dragOverNodeKey:K}),null==c||c({event:e,node:I(t)}))}})),o(f(n),"onNodeDragLeave",(function(e,t){n.currentMouseOverDroppableNodeKey!==t.eventKey||e.currentTarget.contains(e.relatedTarget)||(n.resetDragState(),n.currentMouseOverDroppableNodeKey=null);var r=n.props.onDragLeave;null==r||r({event:e,node:I(t)})})),o(f(n),"onWindowDragEnd",(function(e){n.onNodeDragEnd(e,null,!0),window.removeEventListener("dragend",n.onWindowDragEnd)})),o(f(n),"onNodeDragEnd",(function(e,t){var r=n.props.onDragEnd;n.setState({dragOverNodeKey:null}),n.cleanDragState(),null==r||r({event:e,node:I(t)}),n.dragNodeProps=null,window.removeEventListener("dragend",n.onWindowDragEnd)})),o(f(n),"onNodeDrop",(function(t,r){var o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.state,d=i.dragChildrenKeys,l=i.dropPosition,s=i.dropTargetKey,c=i.dropTargetPos;if(i.dropAllowed){var u=n.props.onDrop;if(n.setState({dragOverNodeKey:null}),n.cleanDragState(),null!==s){var f=e(e({},A(s,n.getTreeNodeRequiredProps())),{},{active:(null===(o=n.getActiveItem())||void 0===o?void 0:o.key)===s,data:w(n.state.keyEntities,s).node}),v=d.includes(s);p(!v,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var h=J(c),g={event:t,node:I(f),dragNode:n.dragNodeProps?I(n.dragNodeProps):null,dragNodesKeys:[n.dragNodeProps.eventKey].concat(d),dropToGap:0!==l,dropPosition:l+Number(h[h.length-1])};a||null==u||u(g),n.dragNodeProps=null}}})),o(f(n),"cleanDragState",(function(){null!==n.state.draggingNodeKey&&n.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),n.dragStartMousePosition=null,n.currentMouseOverDroppableNodeKey=null})),o(f(n),"triggerExpandActionExpand",(function(t,r){var o=n.state,a=o.expandedKeys,i=o.flattenNodes,d=r.expanded,l=r.key;if(!(r.isLeaf||t.shiftKey||t.metaKey||t.ctrlKey)){var s=i.filter((function(e){return e.key===l}))[0],c=I(e(e({},A(l,n.getTreeNodeRequiredProps())),{},{data:s.data}));n.setExpandedKeys(d?q(a,l):V(a,l)),n.onNodeExpand(t,c)}})),o(f(n),"onNodeClick",(function(e,t){var r=n.props,o=r.onClick;"click"===r.expandAction&&n.triggerExpandActionExpand(e,t),null==o||o(e,t)})),o(f(n),"onNodeDoubleClick",(function(e,t){var r=n.props,o=r.onDoubleClick;"doubleClick"===r.expandAction&&n.triggerExpandActionExpand(e,t),null==o||o(e,t)})),o(f(n),"onNodeSelect",(function(e,t){var r=n.state.selectedKeys,o=n.state,a=o.keyEntities,i=o.fieldNames,d=n.props,l=d.onSelect,s=d.multiple,c=t.selected,u=t[i.key],f=!c,v=(r=f?s?V(r,u):[u]:q(r,u)).map((function(e){var t=w(a,e);return t?t.node:null})).filter(Boolean);n.setUncontrolledState({selectedKeys:r}),null==l||l(r,{event:"select",selected:f,node:t,selectedNodes:v,nativeEvent:e.nativeEvent})})),o(f(n),"onNodeCheck",(function(e,r,o){var a,i=n.state,d=i.keyEntities,l=i.checkedKeys,s=i.halfCheckedKeys,c=n.props,u=c.checkStrictly,f=c.onCheck,v=r.key,p={event:"check",node:r,checked:o,nativeEvent:e.nativeEvent};if(u){var h=o?V(l,v):q(l,v);a={checked:h,halfChecked:q(s,v)},p.checkedNodes=h.map((function(e){return w(d,e)})).filter(Boolean).map((function(e){return e.node})),n.setUncontrolledState({checkedKeys:h})}else{var g=j([].concat(t(l),[v]),!0,d),y=g.checkedKeys,m=g.halfCheckedKeys;if(!o){var k=new Set(y);k.delete(v);var K=j(Array.from(k),{halfCheckedKeys:m},d);y=K.checkedKeys,m=K.halfCheckedKeys}a=y,p.checkedNodes=[],p.checkedNodesPositions=[],p.halfCheckedKeys=m,y.forEach((function(e){var t=w(d,e);if(t){var n=t.node,r=t.pos;p.checkedNodes.push(n),p.checkedNodesPositions.push({node:n,pos:r})}})),n.setUncontrolledState({checkedKeys:y},!1,{halfCheckedKeys:m})}null==f||f(a,p)})),o(f(n),"onNodeLoad",(function(e){var t,r=e.key,o=w(n.state.keyEntities,r);if(null==o||null===(t=o.children)||void 0===t||!t.length){var a=new Promise((function(t,o){n.setState((function(a){var i=a.loadedKeys,d=void 0===i?[]:i,l=a.loadingKeys,s=void 0===l?[]:l,c=n.props,u=c.loadData,f=c.onLoad;return!u||d.includes(r)||s.includes(r)?null:(u(e).then((function(){var o=V(n.state.loadedKeys,r);null==f||f(o,{event:"load",node:e}),n.setUncontrolledState({loadedKeys:o}),n.setState((function(e){return{loadingKeys:q(e.loadingKeys,r)}})),t()})).catch((function(e){if(n.setState((function(e){return{loadingKeys:q(e.loadingKeys,r)}})),n.loadingRetryTimes[r]=(n.loadingRetryTimes[r]||0)+1,n.loadingRetryTimes[r]>=10){var a=n.state.loadedKeys;p(!1,"Retry for `loadData` many times but still failed. No more retry."),n.setUncontrolledState({loadedKeys:V(a,r)}),t()}o(e)})),{loadingKeys:V(s,r)})}))}));return a.catch((function(){})),a}})),o(f(n),"onNodeMouseEnter",(function(e,t){var r=n.props.onMouseEnter;null==r||r({event:e,node:t})})),o(f(n),"onNodeMouseLeave",(function(e,t){var r=n.props.onMouseLeave;null==r||r({event:e,node:t})})),o(f(n),"onNodeContextMenu",(function(e,t){var r=n.props.onRightClick;r&&(e.preventDefault(),r({event:e,node:t}))})),o(f(n),"onFocus",(function(){var e=n.props.onFocus;n.setState({focused:!0});for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];null==e||e.apply(void 0,r)})),o(f(n),"onBlur",(function(){var e=n.props.onBlur;n.setState({focused:!1}),n.onActiveChange(null);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];null==e||e.apply(void 0,r)})),o(f(n),"getTreeNodeRequiredProps",(function(){var e=n.state;return{expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],loadedKeys:e.loadedKeys||[],loadingKeys:e.loadingKeys||[],checkedKeys:e.checkedKeys||[],halfCheckedKeys:e.halfCheckedKeys||[],dragOverNodeKey:e.dragOverNodeKey,dropPosition:e.dropPosition,keyEntities:e.keyEntities}})),o(f(n),"setExpandedKeys",(function(e){var t=n.state,r=O(t.treeData,e,t.fieldNames);n.setUncontrolledState({expandedKeys:e,flattenNodes:r},!0)})),o(f(n),"onNodeExpand",(function(e,t){var r=n.state.expandedKeys,o=n.state,a=o.listChanging,i=o.fieldNames,d=n.props,l=d.onExpand,s=d.loadData,c=t.expanded,u=t[i.key];if(!a){var f=r.includes(u),v=!c;if(p(c&&f||!c&&!f,"Expand state not sync with index check"),r=v?V(r,u):q(r,u),n.setExpandedKeys(r),null==l||l(r,{node:t,expanded:v,nativeEvent:e.nativeEvent}),v&&s){var h=n.onNodeLoad(t);h&&h.then((function(){var e=O(n.state.treeData,r,i);n.setUncontrolledState({flattenNodes:e})})).catch((function(){var e=q(n.state.expandedKeys,u);n.setExpandedKeys(e)}))}}})),o(f(n),"onListChangeStart",(function(){n.setUncontrolledState({listChanging:!0})})),o(f(n),"onListChangeEnd",(function(){setTimeout((function(){n.setUncontrolledState({listChanging:!1})}))})),o(f(n),"onActiveChange",(function(e){var t=n.state.activeKey,r=n.props,o=r.onActiveChange,a=r.itemScrollOffset,i=void 0===a?0:a;t!==e&&(n.setState({activeKey:e}),null!==e&&n.scrollTo({key:e,offset:i}),null==o||o(e))})),o(f(n),"getActiveItem",(function(){var e=n.state,t=e.activeKey,r=e.flattenNodes;return null===t?null:r.find((function(e){return e.key===t}))||null})),o(f(n),"offsetActiveKey",(function(e){var t=n.state,r=t.flattenNodes,o=t.activeKey,a=r.findIndex((function(e){return e.key===o}));-1===a&&e<0&&(a=r.length);var i=r[a=(a+e+r.length)%r.length];if(i){var d=i.key;n.onActiveChange(d)}else n.onActiveChange(null)})),o(f(n),"onKeyDown",(function(t){var r=n.state,o=r.activeKey,a=r.expandedKeys,i=r.checkedKeys,d=r.fieldNames,l=n.props,s=l.onKeyDown,c=l.checkable,u=l.selectable;switch(t.which){case E.UP:n.offsetActiveKey(-1),t.preventDefault();break;case E.DOWN:n.offsetActiveKey(1),t.preventDefault()}var f=n.getActiveItem();if(f&&f.data){var v=n.getTreeNodeRequiredProps(),p=!1===f.data.isLeaf||!!(f.data[d.children]||[]).length,h=I(e(e({},A(o,v)),{},{data:f.data,active:!0}));switch(t.which){case E.LEFT:p&&a.includes(o)?n.onNodeExpand({},h):f.parent&&n.onActiveChange(f.parent.key),t.preventDefault();break;case E.RIGHT:p&&!a.includes(o)?n.onNodeExpand({},h):f.children&&f.children.length&&n.onActiveChange(f.children[0].key),t.preventDefault();break;case E.ENTER:case E.SPACE:!c||h.disabled||!1===h.checkable||h.disableCheckbox?c||!u||h.disabled||!1===h.selectable||n.onNodeSelect({},h):n.onNodeCheck({},h,!i.includes(o))}}null==s||s(t)})),o(f(n),"setUncontrolledState",(function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n.destroyed){var a=!1,i=!0,d={};Object.keys(t).forEach((function(e){n.props.hasOwnProperty(e)?i=!1:(a=!0,d[e]=t[e])})),!a||r&&!i||n.setState(e(e({},d),o))}})),o(f(n),"scrollTo",(function(e){n.listRef.current.scrollTo(e)})),n}return d(s,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var e=this.props,t=e.activeKey,n=e.itemScrollOffset,r=void 0===n?0:n;void 0!==t&&t!==this.state.activeKey&&(this.setState({activeKey:t}),null!==t&&this.scrollTo({key:t,offset:r}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var e,t=this.state,r=t.focused,a=t.flattenNodes,d=t.keyEntities,l=t.draggingNodeKey,s=t.activeKey,c=t.dropLevelOffset,u=t.dropContainerKey,f=t.dropTargetKey,p=t.dropPosition,h=t.dragOverNodeKey,g=t.indent,m=this.props,k=m.prefixCls,K=m.className,E=m.style,x=m.showLine,b=m.focusable,C=m.tabIndex,S=void 0===C?0:C,w=m.selectable,D=m.showIcon,M=m.icon,P=m.switcherIcon,R=m.draggable,L=m.checkable,O=m.checkStrictly,T=m.disabled,A=m.motion,I=m.loadData,H=m.filterTreeNode,B=m.height,j=m.itemHeight,z=m.scrollWidth,W=m.virtual,Y=m.titleRender,G=m.dropIndicatorRender,U=m.onContextMenu,F=m.onScroll,X=m.direction,q=m.rootClassName,V=m.rootStyle,J=y(this.props,{aria:!0,data:!0});R&&(e="object"===n(R)?R:"function"==typeof R?{nodeDraggable:R}:{});var Q={prefixCls:k,selectable:w,showIcon:D,icon:M,switcherIcon:P,draggable:e,draggingNodeKey:l,checkable:L,checkStrictly:O,disabled:T,keyEntities:d,dropLevelOffset:c,dropContainerKey:u,dropTargetKey:f,dropPosition:p,dragOverNodeKey:h,indent:g,direction:X,dropIndicatorRender:G,loadData:I,filterTreeNode:H,titleRender:Y,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return N.createElement(_.Provider,{value:Q},N.createElement("div",{className:v(k,K,q,o(o(o({},"".concat(k,"-show-line"),x),"".concat(k,"-focused"),r),"".concat(k,"-active-focused"),null!==s)),style:V},N.createElement(Oe,i({ref:this.listRef,prefixCls:k,style:E,data:a,disabled:T,selectable:w,checkable:!!L,motion:A,dragging:null!==l,height:B,itemHeight:j,virtual:W,focusable:b,focused:r,tabIndex:S,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:U,onScroll:F,scrollWidth:z},this.getTreeNodeRequiredProps(),J))))}}],[{key:"getDerivedStateFromProps",value:function(t,n){var r,a=n.prevProps,i={prevProps:t};function d(e){return!a&&t.hasOwnProperty(e)||a&&a[e]!==t[e]}var l=n.fieldNames;if(d("fieldNames")&&(l=R(t.fieldNames),i.fieldNames=l),d("treeData")?r=t.treeData:d("children")&&(p(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),r=L(t.children)),r){i.treeData=r;var s=T(r,{fieldNames:l});i.keyEntities=e(o({},we,Me),s.keyEntities)}var c,u=i.keyEntities||n.keyEntities;if(d("expandedKeys")||a&&d("autoExpandParent"))i.expandedKeys=t.autoExpandParent||!a&&t.defaultExpandParent?ne(t.expandedKeys,u):t.expandedKeys;else if(!a&&t.defaultExpandAll){var f=e({},u);delete f[we];var v=[];Object.keys(f).forEach((function(e){var t=f[e];t.children&&t.children.length&&v.push(t.key)})),i.expandedKeys=v}else!a&&t.defaultExpandedKeys&&(i.expandedKeys=t.autoExpandParent||t.defaultExpandParent?ne(t.defaultExpandedKeys,u):t.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,r||i.expandedKeys){var h=O(r||n.treeData,i.expandedKeys||n.expandedKeys,l);i.flattenNodes=h}if((t.selectable&&(d("selectedKeys")?i.selectedKeys=ee(t.selectedKeys,t):!a&&t.defaultSelectedKeys&&(i.selectedKeys=ee(t.defaultSelectedKeys,t))),t.checkable)&&(d("checkedKeys")?c=te(t.checkedKeys)||{}:!a&&t.defaultCheckedKeys?c=te(t.defaultCheckedKeys)||{}:r&&(c=te(t.checkedKeys)||{checkedKeys:n.checkedKeys,halfCheckedKeys:n.halfCheckedKeys}),c)){var g=c,y=g.checkedKeys,m=void 0===y?[]:y,k=g.halfCheckedKeys,K=void 0===k?[]:k;if(!t.checkStrictly){var E=j(m,!0,u);m=E.checkedKeys,K=E.halfCheckedKeys}i.checkedKeys=m,i.halfCheckedKeys=K}return d("loadedKeys")&&(i.loadedKeys=t.loadedKeys),i}}]),s}(N.Component);o(Te,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(e){var t=e.dropPosition,n=e.dropLevelOffset,r=e.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:o.top=0,o.left=-n*r;break;case 1:o.bottom=0,o.left=-n*r;break;case 0:o.bottom=0,o.left=r}return x.createElement("div",{style:o})},allowDrop:function(){return!0},expandAction:!1}),o(Te,"TreeNode",X);export{Te as T,j as a,q as b,T as c,V as d,ne as e,R as f,L as g,X as h};
