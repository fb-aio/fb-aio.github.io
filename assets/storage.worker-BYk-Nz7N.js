!function(){"use strict";const e=["devMode","BEVIPExpiredTime","sharedPostURL","sharedPostTime"],t=e=>{try{return"string"==typeof e?new Blob([e]).size:new Blob([JSON.stringify(e)]).size}catch(t){return 0}},r=(e,t=2)=>{if(0===e)return"0 Bytes";const r=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(r))+" "+["Bytes","KB","MB","GB"][s]};self.onmessage=s=>{var a;const{type:o,data:i}=s.data;if("CALCULATE_STORAGE"===o)try{const s=JSON.parse(i),o=t(i),y=[];(null==(a=s.state)?void 0:a.persist)&&Object.keys(s.state.persist).filter((t=>!e.includes(t))).forEach((e=>{const a=s.state.persist[e],o=t(a),i={key:e,size:o,sizeFormatted:r(o),type:Array.isArray(a)?"array":typeof a,itemCount:Array.isArray(a)?a.length:null,value:a};"cached"!==e||"object"!=typeof a||Array.isArray(a)||(i.children=Object.keys(a).map((e=>{const s=a[e],o=t(s);return{key:`cached.${e}`,size:o,sizeFormatted:r(o),type:Array.isArray(s)?"array":typeof s,itemCount:Array.isArray(s)?s.length:null,value:s}})),i.children.sort(((e,t)=>t.size-e.size))),y.push(i)})),y.sort(((e,t)=>t.size-e.size)),self.postMessage({type:"CALCULATION_COMPLETE",result:{storageData:s,storageSize:o,dataBreakdown:y}})}catch(y){self.postMessage({type:"CALCULATION_ERROR",error:y.message})}}}();
